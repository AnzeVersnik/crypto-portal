{% extends "header.html" %}
{% block body %}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/visual.css') }}" />
    
    <!-- pop up nasvet + omejitve -->
    
    <div id="myModal1" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <span id="cl1" class="close1">&times;</span>
            <h2>Opozorilo</h2>
        </div>
        <div class="modal-body">
            <p>Izberite slikovno datoteko!</p>
        </div>
    </div>
    </div>
    
    <div id="myModal2" class="modal">
        <div class="modal-content">
        <div class="modal-header">
            <span id="cl2" class="close2">&times;</span>
            <h2>Opozorilo</h2>
        </div>
        <div class="modal-body">
            <p>Datoteka je prevelika!</p>
        </div>
     </div>
    </div>
    
    <div id="myModal3" class="modal">
    <div class="modal-content">
        <div id="header-3">
            <span id="cl3" class="close3">&times;</span>
            <h2>Namig</h2>
        </div>
        <div class="modal-body">
            <p>Najboljši rezultat boste dosegli z izbiro dvobarvne slike</p>
        </div>
    </div>
    </div>
    
    
    <ul id="nav-bar-2">
        <li><h2>Vizualna kriptografija</h2></li>
        <li id="navodila"><button id="pop-up">Navodila</button></li>
    </ul>
    
    
    <div class="container">
        
        <!-- PRVI upload in prikaz slik -->
        
        <form action="{{ url_for('visual.upload_image') }}" method="POST" enctype="multipart/form-data">
            <div id="custom"><div class="custom-file-upload"> 
                <input type="file" id="file" name="file" value="send"/>
                <input type="submit" value="Potrdi" id="upload-btn" disabled/>
            </div></div>
        </form>
        
        <img id="img-1" src="../static/images/generic-pic1.png">
        <br>
        
        <div id="buttons">
           
            <button id="noise-btn" class="open-sans-font">Prikaži delni sliki</button>
            <button id="animation-btn" class="open-sans-font">Prikaži animacijo</button>
                   
        </div>
        <br>
        
        <div id="outlines">
            <img id="img-left" src="../static/uploads/out1.png?time={{time}}">
            <img id="img-right" src="../static/uploads/out2.png?time={{time}}">
            <div id="img-container"><img id="img-result" src="../static/uploads/result.png?time={{time}}"></div>
            <div class="clear"></div>
        </div>
        
        <!-- DROPBOX -->
        
        <div id="border-top"></div>
        
        <h4 id="both">Če že imaš obe delni sliki, povleci vsako v svoj okvir, klikni gumb "Potrdi" in si oglej animacijo.</h4><br><br>
        
        
        <form id="upload-form" action="{{ url_for('visual.upload') }}" method="POST" enctype="multipart/form-data">
            <!--<div class="custom-file-upload">
                <input id="file-picker" type="file" name="file" accept="image/*" multiple>
            </div>-->
            
            <div id="dropbox-container">
                
            <div id="dropbox-1">
                
                {% if files|length > 0 %}
                <img src="{{ url_for('static', filename='uploads/{}/{}'.format(uuid, files[0])) }}" id="uploaded-img-1">
                {% endif %}
                
                <div class="clear"></div>
            </div><p>
            
            <div id="dropbox-2">
                
                {% if files|length > 1 %}
                <img src="{{ url_for('static', filename='uploads/{}/{}'.format(uuid, files[1])) }}" id="uploaded-img-2">
                {% endif %}
                
                <div class="clear"></div>
            </div>
                
            <div class="clear"></div>
                
            </div>

            <fieldset id="progress" style="display: none">
                <legend>Nalaganje</legend>

                <div class="progress-trough">
                    <div id="progress-bar" class="progress-bar">0%</div>
                </div>
            </fieldset>
    
        </form>
        <input type="submit" value="Potrdi" id="upload-button">
        <button id="animation-btn-2">Prikaži animacijo</button>
        
        <div class="clear"></div>
    </div>
  
    <script type="text/javascript">
        var UPLOAD_URL = "{{url_for('visual.upload')}}";
        var NEXT_URL   = "{{url_for('visual.upload_complete', uuid='')}}";
    </script>
    <script src="{{ url_for('static', filename='js/visual/visual.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/visual/uploadr.js') }}" type="text/javascript"></script>
{% endblock %}
